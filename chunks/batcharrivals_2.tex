
import numpy as np

l = 1 # M/M/1 has batch size 1
f = np.ones(l + 1) / l # f[0] =1, f[1] = 1 
f[0] = 0 # set f[0] = 0
F = np.cumsum(f) # distribution 
G = np.ones_like(F) - F # survivor function

labda = 1
mu = 3
num = 30
p = np.ones(num)

for n in range(1, num):
    p[n] = labda / mu * sum(p[n - 1 - i] * G[i] for i in range(min(n, l)))
    print(n, p[n], (labda / mu)**n)

1 0.333333333333 0.3333333333333333
2 0.111111111111 0.1111111111111111
3 0.037037037037 0.03703703703703703
4 0.0123456790123 0.012345679012345677
5 0.00411522633745 0.004115226337448558
6 0.00137174211248 0.0013717421124828527
7 0.000457247370828 0.00045724737082761756
8 0.000152415790276 0.0001524157902758725
9 5.08052634253e-05 5.0805263425290837e-05
10 1.69350878084e-05 1.693508780843028e-05
11 5.64502926948e-06 5.645029269476759e-06
12 1.88167642316e-06 1.8816764231589195e-06
13 6.27225474386e-07 6.272254743863065e-07
14 2.09075158129e-07 2.090751581287688e-07
15 6.96917193763e-08 6.969171937625627e-08
16 2.32305731254e-08 2.3230573125418753e-08
17 7.74352437514e-09 7.743524375139585e-09
18 2.58117479171e-09 2.5811747917131946e-09
19 8.60391597238e-10 8.603915972377315e-10
20 2.86797199079e-10 2.867971990792438e-10
21 9.55990663597e-11 9.559906635974793e-11
22 3.18663554532e-11 3.186635545324931e-11
23 1.06221184844e-11 1.0622118484416435e-11
24 3.54070616147e-12 3.540706161472145e-12
25 1.18023538716e-12 1.1802353871573816e-12
26 3.93411795719e-13 3.934117957191272e-13
27 1.3113726524e-13 1.3113726523970905e-13
28 4.37124217466e-14 4.3712421746569684e-14
29 1.45708072489e-14 1.457080724885656e-14
